<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OussaStream</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/MD3HFP46/Untitled-Design-1-Edited-Edited.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Netflix Theme Colors */
            --netflix-red: #E50914;
            --netflix-dark: #221F1F;
            --netflix-darker: #141414;
            --netflix-gray: #564D4D;
            --netflix-light: #F5F5F1;
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.25);
            --shadow-xl: 0 12px 48px rgba(0, 0, 0, 0.35);
            
            /* Transitions */
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--netflix-darker);
            color: var(--netflix-light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Netflix Navbar */
        .netflix-navbar {
            background: linear-gradient(180deg, rgba(0,0,0,0.7) 0%, transparent 100%);
            backdrop-filter: blur(10px);
            transition: var(--transition);
            padding: 1rem 0;
            z-index: 1000;
        }

        .netflix-navbar.scrolled {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-md);
        }

        .navbar-brand img {
            height: 45px;
            transition: var(--transition);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .navbar-nav .nav-link {
            color: var(--netflix-light) !important;
            font-weight: 500;
            position: relative;
            transition: var(--transition);
            margin: 0 0.5rem;
        }

        .navbar-nav .nav-link:hover {
            color: var(--netflix-red) !important;
            transform: translateY(-2px);
        }

        .navbar-nav .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            background: var(--netflix-red);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .navbar-nav .nav-link:hover::after {
            width: 100%;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--netflix-darker);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(229, 9, 20, 0.3);
            border-radius: 50%;
            border-top-color: var(--netflix-red);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1rem;
        }

        .loading-text {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--netflix-light);
            text-align: center;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, rgba(20,20,20,0.8) 0%, rgba(34,31,31,0.9) 100%),
                        url('https://images.unsplash.com/photo-1440404653325-ab127d49abc1?ixlib=rb-4.0.3') center/cover;
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--netflix-red) 0%, transparent 70%);
            opacity: 0.1;
            animation: heroShimmer 3s ease-in-out infinite alternate;
        }

        @keyframes heroShimmer {
            from { opacity: 0.1; }
            to { opacity: 0.2; }
        }

        .hero-content {
            z-index: 2;
            position: relative;
        }

        .hero-title {
            font-family: 'Poppins', sans-serif;
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--netflix-light) 0%, var(--netflix-red) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: heroTitleSlide 1s ease-out;
        }

        @keyframes heroTitleSlide {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: var(--netflix-gray);
            margin-bottom: 2rem;
            animation: heroSubtitleSlide 1s ease-out 0.3s both;
        }

        @keyframes heroSubtitleSlide {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cta-button {
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            animation: ctaButtonSlide 1s ease-out 0.6s both;
        }

        @keyframes ctaButtonSlide {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        .cta-button:hover::before {
            left: 100%;
        }

        /* Sections */
        .section {
            padding: 4rem 0;
            position: relative;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--netflix-light);
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            border-radius: 2px;
        }

        /* Search and Filter */
        .controls-container {
            background: rgba(34, 31, 31, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: var(--shadow-md);
        }

        .search-container {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .search-input {
            background: rgba(20, 20, 20, 0.8);
            border: 2px solid rgba(86, 77, 77, 0.5);
            color: var(--netflix-light);
            border-radius: 25px;
            padding: 0.8rem 1.2rem 0.8rem 3rem;
            width: 100%;
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
            background: rgba(20, 20, 20, 1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--netflix-gray);
            pointer-events: none;
        }

        .filter-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            background: rgba(86, 77, 77, 0.3);
            color: var(--netflix-light);
            border: 2px solid transparent;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: rgba(229, 9, 20, 0.2);
            border-color: var(--netflix-red);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--netflix-red);
            color: white;
            box-shadow: var(--shadow-md);
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .content-card {
            background: rgba(34, 31, 31, 0.9);
            border-radius: 15px;
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            position: relative;
            cursor: pointer;
        }

        .content-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        .content-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(229, 9, 20, 0.1) 100%);
            opacity: 0;
            transition: var(--transition);
            z-index: 1;
        }

        .content-card:hover::before {
            opacity: 1;
        }

        .content-poster {
            width: 100%;
            height: 400px;
            object-fit: cover;
            transition: var(--transition);
        }

        .content-card:hover .content-poster {
            transform: scale(1.1);
        }

        .content-info {
            padding: 1.5rem;
            position: relative;
            z-index: 2;
        }

        .content-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--netflix-light);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .content-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            color: var(--netflix-gray);
            font-size: 0.9rem;
        }

        .content-description {
            color: var(--netflix-gray);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .content-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-watch {
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
        }

        .btn-watch:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-edit, .btn-delete {
            padding: 0.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 35px;
        }

        .btn-edit {
            background: rgba(52, 152, 219, 0.8);
            color: white;
        }

        .btn-edit:hover {
            background: #3498db;
            transform: scale(1.1);
        }

        .btn-delete {
            background: rgba(231, 76, 60, 0.8);
            color: white;
        }

        .btn-delete:hover {
            background: #e74c3c;
            transform: scale(1.1);
        }

        /* Series Badge */
        .series-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            z-index: 3;
        }

        /* Pagination */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .pagination-btn {
            background: rgba(34, 31, 31, 0.8);
            color: var(--netflix-light);
            border: 2px solid transparent;
            padding: 0.5rem 0.8rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            min-width: 40px;
        }

        .pagination-btn:hover {
            background: rgba(229, 9, 20, 0.2);
            border-color: var(--netflix-red);
        }

        .pagination-btn.active {
            background: var(--netflix-red);
            color: white;
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Admin Panel */
        .admin-section {
            background: rgba(34, 31, 31, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(86, 77, 77, 0.3);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(229, 9, 20, 0.3);
        }

        .admin-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--netflix-red);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-toggles {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1) 0%, rgba(86, 77, 77, 0.1) 100%);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(229, 9, 20, 0.2);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--netflix-red);
        }

        .stat-label {
            color: var(--netflix-gray);
            margin-top: 0.5rem;
        }

        .login-form {
            background: rgba(20, 20, 20, 0.8);
            padding: 2rem;
            border-radius: 15px;
            max-width: 400px;
            margin: 0 auto;
            box-shadow: var(--shadow-lg);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--netflix-light);
            font-weight: 500;
        }

        .form-input, .form-select {
            width: 100%;
            background: rgba(34, 31, 31, 0.8);
            border: 2px solid rgba(86, 77, 77, 0.5);
            color: var(--netflix-light);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: var(--transition);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: rgba(86, 77, 77, 0.8);
            color: var(--netflix-light);
            border: 2px solid transparent;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-left: 0.5rem;
        }

        .btn-secondary:hover {
            background: rgba(86, 77, 77, 1);
            border-color: var(--netflix-red);
        }

        .content-form {
            background: rgba(20, 20, 20, 0.8);
            padding: 2rem;
            border-radius: 15px;
            margin-top: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .form-textarea {
            width: 100%;
            background: rgba(34, 31, 31, 0.8);
            border: 2px solid rgba(86, 77, 77, 0.5);
            color: var(--netflix-light);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: var(--transition);
            resize: vertical;
            min-height: 100px;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
        }

        /* Series Form */
        .seasons-container {
            background: rgba(34, 31, 31, 0.5);
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .season-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(86, 77, 77, 0.3);
        }

        .season-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--netflix-red);
        }

        .episodes-container {
            display: grid;
            gap: 1rem;
        }

        .episode-row {
            display: grid;
            grid-template-columns: 1fr 1fr 2fr auto;
            gap: 1rem;
            align-items: end;
        }

        .btn-add {
            background: rgba(40, 167, 69, 0.8);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-add:hover {
            background: #28a745;
        }

        .btn-remove {
            background: rgba(231, 76, 60, 0.8);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            width: 35px;
            height: 35px;
        }

        .btn-remove:hover {
            background: #e74c3c;
        }

        /* Collections Section */
        .collections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .collection-card {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1) 0%, rgba(34, 31, 31, 0.9) 100%);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(229, 9, 20, 0.2);
            cursor: pointer;
        }

        .collection-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.2) 0%, rgba(34, 31, 31, 0.9) 100%);
        }

        .collection-icon {
            font-size: 3rem;
            color: var(--netflix-red);
            margin-bottom: 1rem;
        }

        .collection-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--netflix-light);
            margin-bottom: 0.5rem;
        }

        .collection-count {
            color: var(--netflix-gray);
            font-size: 0.9rem;
        }

        /* Footer */
        .footer {
            background: linear-gradient(135deg, var(--netflix-darker) 0%, var(--netflix-dark) 100%);
            padding: 3rem 0 2rem;
            border-top: 1px solid rgba(86, 77, 77, 0.3);
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--netflix-red), transparent);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            color: var(--netflix-red);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .footer-section p, .footer-section a {
            color: var(--netflix-gray);
            text-decoration: none;
            line-height: 1.8;
            transition: var(--transition);
        }

        .footer-section a:hover {
            color: var(--netflix-light);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(86, 77, 77, 0.3);
            color: var(--netflix-gray);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(34, 31, 31, 0.8);
            color: var(--netflix-light);
            border-radius: 50%;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--netflix-red);
            color: white;
            transform: translateY(-3px);
        }

        /* Video Player Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 10001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            background: var(--netflix-darker);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10002;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: var(--netflix-red);
        }

        .video-container {
            width: 100%;
            height: 70vh;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .modal-info {
            padding: 2rem;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--netflix-light);
            margin-bottom: 1rem;
        }

        .modal-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
            color: var(--netflix-gray);
        }

        .modal-description {
            color: var(--netflix-gray);
            line-height: 1.6;
        }

        /* Series Episode Selector */
        .episode-selector {
            padding: 1.5rem;
            border-top: 1px solid rgba(86, 77, 77, 0.3);
        }

        .selector-row {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .selector-label {
            font-weight: 600;
            color: var(--netflix-light);
            margin-bottom: 0.5rem;
        }

        .btn-play-episode {
            background: var(--netflix-red);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-play-episode:hover {
            background: #c8070f;
            transform: translateY(-2px);
        }

        /* Connection Status */
        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            z-index: 1000;
            transition: var(--transition);
        }

        .connection-status.connected {
            background: rgba(40, 167, 69, 0.9);
            color: white;
        }

        .connection-status.disconnected {
            background: rgba(220, 53, 69, 0.9);
            color: white;
        }

        .connection-status.connecting {
            background: rgba(255, 193, 7, 0.9);
            color: var(--netflix-dark);
        }

        /* Toggle Buttons */
        .toggle-button {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
        }

        .toggle-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .toggle-button.active {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
        }

        .toggle-button.series {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .toggle-button.series.active {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .content-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.5rem;
            }

            .controls-container {
                padding: 1.5rem;
            }

            .filter-buttons {
                justify-content: flex-start;
            }

            .admin-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .admin-toggles {
                justify-content: center;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .episode-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .selector-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .pagination-container {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }

            .content-card {
                margin: 0 1rem;
            }

            .section {
                padding: 2rem 0;
            }

            .controls-container {
                margin: 1rem;
            }

            .admin-section {
                margin: 1rem;
                padding: 1.5rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-slide-up {
            animation: slideInUp 0.8s ease-out;
        }

        .animate-scale-in {
            animation: scaleIn 0.6s ease-out;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-0 {
            margin-bottom: 0 !important;
        }

        .mt-3 {
            margin-top: 1rem !important;
        }

        .netflix-red-text {
            color: var(--netflix-red);
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading OussaStream...</div>
    </div>
    
    <div class="connection-status connecting" id="connectionStatus">
        <i class="fas fa-wifi"></i> Connecting to Firebase...
    </div>

    <nav class="navbar navbar-expand-lg netflix-navbar fixed-top" id="mainNavbar">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="app.showHome()">
                <img src="https://i.ibb.co/MD3HFP46/Untitled-Design-1-Edited-Edited.png" alt="OussaStream">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showHome()">
                            <i class="fas fa-home"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showMovies()">
                            <i class="fas fa-film"></i> Movies
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showSeries()">
                            <i class="fas fa-tv"></i> Series
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showCollections()">
                            <i class="fas fa-layer-group"></i> Collections
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.toggleAdmin()">
                            <i class="fas fa-cog"></i> Admin
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="mainContent">
        <section class="hero-section" id="heroSection">
            <div class="container">
                <div class="row justify-content-center text-center">
                    <div class="col-lg-8 hero-content">
                        <h1 class="hero-title">OussaStream</h1>
                        <p class="hero-subtitle">Discover and stream the greatest movies and series of all time with our premium collection. Experience cinema like never before.</p>
                        <button class="cta-button" onclick="app.showMovies()">
                            <i class="fas fa-play"></i> Start Watching
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="section" id="newContentSection">
            <div class="container">
                <h2 class="section-title">New Releases</h2>
                <p class="text-center" style="color: var(--netflix-gray); margin-bottom: 3rem;">Recently added to our collection</p>
                <div class="content-grid" id="newContentGrid">
                    </div>
                <div class="text-center">
                    <button class="cta-button" onclick="app.showMovies()" style="margin-right: 1rem;">View All Movies</button>
                    <button class="cta-button" onclick="app.showSeries()">View All Series</button>
                </div>
            </div>
        </section>

        <section class="section" id="collectionsSection">
            <div class="container">
                <h2 class="section-title">Browse Collections</h2>
                <div class="collections-grid" id="collectionsGrid">
                    <div class="collection-card" onclick="app.filterContent('Drama', 'movies')">
                        <div class="collection-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="collection-title">Drama</div>
                        <div class="collection-count" id="dramaCount">0 movies & series</div>
                    </div>
                    <div class="collection-card" onclick="app.filterContent('Action', 'movies')">
                        <div class="collection-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="collection-title">Action</div>
                        <div class="collection-count" id="actionCount">0 movies & series</div>
                    </div>
                    <div class="collection-card" onclick="app.filterContent('Comedy', 'movies')">
                        <div class="collection-icon">
                            <i class="fas fa-laugh"></i>
                        </div>
                        <div class="collection-title">Comedy</div>
                        <div class="collection-count" id="comedyCount">0 movies & series</div>
                    </div>
                    <div class="collection-card" onclick="app.filterContent('Thriller', 'movies')">
                        <div class="collection-icon">
                            <i class="fas fa-mask"></i>
                        </div>
                        <div class="collection-title">Thriller</div>
                        <div class="collection-count" id="thrillerCount">0 movies & series</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="moviesPage" class="hidden">
        <div style="height: 100px;"></div>
        <div class="container">
            <div class="section">
                <h2 class="section-title">All Movies</h2>
                
                <div class="controls-container">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="movieSearchInput" placeholder="Search movies by title...">
                    </div>
                    <div class="filter-buttons" id="movieFilters">
                        <button class="filter-btn active" onclick="app.filterMovies('all')">All</button>
                        <button class="filter-btn" onclick="app.filterMovies('Drama')">Drama</button>
                        <button class="filter-btn" onclick="app.filterMovies('Action')">Action</button>
                        <button class="filter-btn" onclick="app.filterMovies('Comedy')">Comedy</button>
                        <button class="filter-btn" onclick="app.filterMovies('Thriller')">Thriller</button>
                        <button class="filter-btn" onclick="app.filterMovies('Horror')">Horror</button>
                        <button class="filter-btn" onclick="app.filterMovies('Sci-Fi')">Sci-Fi</button>
                        <button class="filter-btn" onclick="app.filterMovies('Romance')">Romance</button>
                    </div>
                </div>

                <div class="content-grid" id="moviesGrid">
                    </div>

                <div class="pagination-container" id="moviePaginationContainer">
                    </div>
            </div>
        </div>
    </div>

    <div id="seriesPage" class="hidden">
        <div style="height: 100px;"></div>
        <div class="container">
            <div class="section">
                <h2 class="section-title">All Series</h2>
                
                <div class="controls-container">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="seriesSearchInput" placeholder="Search series by title...">
                    </div>
                    <div class="filter-buttons" id="seriesFilters">
                        <button class="filter-btn active" onclick="app.filterSeries('all')">All</button>
                        <button class="filter-btn" onclick="app.filterSeries('Drama')">Drama</button>
                        <button class="filter-btn" onclick="app.filterSeries('Action')">Action</button>
                        <button class="filter-btn" onclick="app.filterSeries('Comedy')">Comedy</button>
                        <button class="filter-btn" onclick="app.filterSeries('Thriller')">Thriller</button>
                        <button class="filter-btn" onclick="app.filterSeries('Horror')">Horror</button>
                        <button class="filter-btn" onclick="app.filterSeries('Sci-Fi')">Sci-Fi</button>
                        <button class="filter-btn" onclick="app.filterSeries('Romance')">Romance</button>
                    </div>
                </div>

                <div class="content-grid" id="seriesGrid">
                    </div>

                <div class="pagination-container" id="seriesPaginationContainer">
                    </div>
            </div>
        </div>
    </div>

    <div id="adminSection" class="hidden">
        <div style="height: 100px;"></div>
        <div class="container">
            <div class="admin-section">
                <div id="adminLogin">
                    <h3 class="section-title">Admin Login</h3>
                    <div class="login-form">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" id="adminUsername" placeholder="Enter email">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-input" id="adminPassword" placeholder="Enter password">
                        </div>
                        <button class="btn-primary" onclick="app.adminLogin()">Login</button>
                    </div>
                </div>

                <div id="adminPanel" class="hidden">
                    <div class="admin-header">
                        <div class="admin-title">
                            <i class="fas fa-crown"></i>
                            Admin Dashboard
                        </div>
                        <div class="admin-toggles">
                            <button class="toggle-button" id="newMovieToggle" onclick="app.toggleNewMovieForm()">
                                <i class="fas fa-plus"></i> Add New Movie
                            </button>
                            <button class="toggle-button series" id="newSeriesToggle" onclick="app.toggleNewSeriesForm()">
                                <i class="fas fa-plus"></i> Add New Series
                            </button>
                            <button class="btn-secondary" onclick="app.adminLogout()">Logout</button>
                        </div>
                    </div>

                    <div class="admin-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="totalMovies">0</div>
                            <div class="stat-label">Total Movies</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalSeries">0</div>
                            <div class="stat-label">Total Series</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalSeasons">0</div>
                            <div class="stat-label">Total Seasons</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalGenres">0</div>
                            <div class="stat-label">Genres</div>
                        </div>
                    </div>

                    <div class="content-form hidden" id="movieForm">
                        <h4 id="movieFormTitle">Add New Movie</h4>
                        <form onsubmit="app.saveMovie(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Movie Title *</label>
                                    <input type="text" class="form-input" id="movieTitle" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Year *</label>
                                    <input type="number" class="form-input" id="movieYear" min="1900" max="2030" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Genre *</label>
                                    <select class="form-select" id="movieType" required>
                                        <option value="">Select Genre</option>
                                        <option value="Action">Action</option>
                                        <option value="Comedy">Comedy</option>
                                        <option value="Drama">Drama</option>
                                        <option value="Horror">Horror</option>
                                        <option value="Romance">Romance</option>
                                        <option value="Sci-Fi">Sci-Fi</option>
                                        <option value="Thriller">Thriller</option>
                                        <option value="Documentary">Documentary</option>
                                        <option value="Animation">Animation</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Poster URL *</label>
                                    <input type="url" class="form-input" id="moviePoster" required placeholder="https://...">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Movie Link (Direct Link) *</label>
                                <input type="url" class="form-input" id="movieLink" required placeholder="https://...">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Description *</label>
                                <textarea class="form-textarea" id="movieDescription" required placeholder="Enter movie description..."></textarea>
                            </div>
                            <div style="display: flex; gap: 1rem;">
                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-save"></i> Save Movie
                                </button>
                                <button type="button" class="btn-secondary" onclick="app.cancelMovieEdit()">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="content-form hidden" id="seriesForm">
                        <h4 id="seriesFormTitle">Add New Series</h4>
                        <form onsubmit="app.saveSeries(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Series Title *</label>
                                    <input type="text" class="form-input" id="seriesTitle" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Year *</label>
                                    <input type="number" class="form-input" id="seriesYear" min="1900" max="2030" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Genre *</label>
                                    <select class="form-select" id="seriesType" required>
                                        <option value="">Select Genre</option>
                                        <option value="Action">Action</option>
                                        <option value="Comedy">Comedy</option>
                                        <option value="Drama">Drama</option>
                                        <option value="Horror">Horror</option>
                                        <option value="Romance">Romance</option>
                                        <option value="Sci-Fi">Sci-Fi</option>
                                        <option value="Thriller">Thriller</option>
                                        <option value="Documentary">Documentary</option>
                                        <option value="Animation">Animation</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Poster URL *</label>
                                    <input type="url" class="form-input" id="seriesPoster" required placeholder="https://...">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Description *</label>
                                <textarea class="form-textarea" id="seriesDescription" required placeholder="Enter series description..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Seasons & Episodes</label>
                                <div id="seasonsContainer">
                                    </div>
                                <button type="button" class="btn-add" onclick="app.addSeason()">
                                    <i class="fas fa-plus"></i> Add Season
                                </button>
                            </div>

                            <div style="display: flex; gap: 1rem;">
                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-save"></i> Save Series
                                </button>
                                <button type="button" class="btn-secondary" onclick="app.cancelSeriesEdit()">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="content-grid" id="adminContentGrid">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div id="videoModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="app.closeVideoModal()">
                <i class="fas fa-times"></i>
            </button>
            <div class="video-container">
                <iframe id="contentPlayer" allowfullscreen></iframe>
            </div>
            <div class="modal-info">
                <div class="modal-title" id="modalTitle"></div>
                <div class="modal-meta">
                    <span id="modalYear"></span>
                    <span id="modalType"></span>
                </div>
                <div class="modal-description" id="modalDescription"></div>
            </div>
            <div class="episode-selector hidden" id="episodeSelector">
                <div class="selector-row">
                    <div>
                        <div class="selector-label">Season</div>
                        <select class="form-select" id="seasonSelect" onchange="app.updateEpisodeOptions()">
                            <option value="">Select Season</option>
                        </select>
                    </div>
                    <div>
                        <div class="selector-label">Episode</div>
                        <select class="form-select" id="episodeSelect">
                            <option value="">Select Episode</option>
                        </select>
                    </div>
                    <div>
                        <button class="btn-play-episode" onclick="app.playSelectedEpisode()">
                            <i class="fas fa-play"></i> Play
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>About OussaStream</h4>
                    <p>Your destination for the greatest movies and series of all time. We curate the finest collection of entertainment from around the world.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <p><a href="#" onclick="app.showHome()">Home</a></p>
                    <p><a href="#" onclick="app.showMovies()">Movies</a></p>
                    <p><a href="#" onclick="app.showSeries()">Series</a></p>
                    <p><a href="#" onclick="app.showCollections()">Collections</a></p>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <p><a href="#">Help Center</a></p>
                    <p><a href="https://www.instagram.com/aits.oussa/">Contact Us</a></p>
                    <p><a href="#">Terms of Service</a></p>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <p>Follow us on social media for the latest updates</p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/aits.oussa/" class="social-link"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 OussaStream. All rights reserved. Made with <span style="color: var(--netflix-red);"></span> by Oussama ait salem.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        // 1. COLLEZ VOTRE CONFIGURATION PERSONNELLE DE FIREBASE ICI
        const firebaseConfig = {
             apiKey: "AIzaSyAMxFcc8nt3RgsodtGBUw-jYEZu6Ui4NIA",
  authDomain: "oussastream.firebaseapp.com",
  databaseURL: "https://oussastream-default-rtdb.firebaseio.com",
  projectId: "oussastream",
  storageBucket: "oussastream.firebasestorage.app",
  messagingSenderId: "12799093969",
  appId: "1:12799093969:web:fc044c5c7b3c78a1e3e9f0"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        class OussaStreamApp {
            constructor() {
                // Pagination settings
                this.currentPage = 1;
                this.moviesPerPage = 12;
                this.seriesCurrentPage = 1;
                this.seriesPerPage = 12;
                
                // Filter settings
                this.currentMovieFilter = 'all';
                this.currentSeriesFilter = 'all';
                this.currentMovieSearch = '';
                this.currentSeriesSearch = '';
                
                // Admin settings
                // 2. COLLEZ VOTRE ADMIN UID DE FIREBASE ICI (ENTRE LES GUILLEMETS)
                this.adminUID = 'XzbAaK0d1qc9AiJUdCGGzudIJXa2'; 
                this.isAdminLoggedIn = false; // Gr par Firebase Auth
                this.editingMovieId = null;
                this.editingSeriesId = null;
                
                // Data
                this.movies = [];
                this.series = [];
                
                // UI state
                this.currentView = 'home';
                this.newMovieToggleActive = false;
                this.newSeriesToggleActive = false;
                this.currentContent = null;
                this.firebaseConnected = false;
                this.seasonCount = 0;

                // Firebase services
                this.db = firebase.database();
                this.auth = firebase.auth(); // Ajout du service d'authentification

                this.init();
            }

            init() {
                this.initFirebase();
                this.bindEvents();
                this.showLoadingOverlay();
                
                // Show loading for 2 seconds to allow Firebase connection
                setTimeout(() => {
                    this.hideLoadingOverlay();
                    this.showHome();
                    this.initAnimations();
                }, 2000);

                this.initNavbarScroll();
            }

            initFirebase() {
                const connectionStatus = document.getElementById('connectionStatus');
                
                // Check connection status
                const connectedRef = this.db.ref('.info/connected');
                connectedRef.on('value', (snapshot) => {
                    if (snapshot.val() === true) {
                        this.firebaseConnected = true;
                        connectionStatus.className = 'connection-status connected';
                        connectionStatus.innerHTML = '<i class="fas fa-wifi"></i> Connected';
                        console.log('Connected to Firebase');
                        this.loadContentFromFirebase();
                    } else {
                        this.firebaseConnected = false;
                        connectionStatus.className = 'connection-status disconnected';
                        connectionStatus.innerHTML = '<i class="fas fa-wifi"></i> Disconnected';
                        console.log('Disconnected from Firebase');
                    }
                });

                // NOUVEL COUTEUR D'AUTHENTIFICATION
                // Gre l'tat de connexion de l'admin
                this.auth.onAuthStateChanged((user) => {
                    // Vrifie si l'utilisateur est connect ET si son UID est celui de l'admin
                    if (user && user.uid === this.adminUID) {
                        this.isAdminLoggedIn = true;
                        console.log('Admin is logged in');
                        // Si on est sur la page admin, montrer le panneau admin
                        if (this.currentView === 'admin') {
                            this.showAdminPanel();
                        }
                    } else {
                        this.isAdminLoggedIn = false;
                        console.log('User is logged out or not admin');
                        // Si on est sur la page admin, montrer le formulaire de login
                        if (this.currentView === 'admin') {
                            this.showAdminLogin();
                        }
                    }
                    // Mettre  jour l'UI pour montrer/cacher les boutons "edit/delete" partout
                    this.updateUI(); 
                });

                // Listen for movies changes in real-time
                this.db.ref('movies').on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        this.movies = Object.keys(data).map(key => ({
                            id: key,
                            ...data[key]
                        }));
                    } else {
                        this.movies = [];
                    }
                    this.updateUI();
                });

                // Listen for series changes in real-time
                this.db.ref('series').on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        this.series = Object.keys(data).map(key => ({
                            id: key,
                            ...data[key]
                        }));
                    } else {
                        this.series = [];
                    }
                    this.updateUI();
                });
            }

            loadContentFromFirebase() {
                // Check if we need to initialize sample data
                Promise.all([
                    this.db.ref('movies').once('value'),
                    this.db.ref('series').once('value')
                ]).then(([moviesSnapshot, seriesSnapshot]) => {
                    if (!moviesSnapshot.val()) {
                        this.initializeSampleMovies();
                    }
                    if (!seriesSnapshot.val()) {
                        this.initializeSampleSeries();
                    }
                });
            }

            initializeSampleMovies() {
                const sampleMovies = [
                    {
                        title: "The Shawshank Redemption",
                        year: 1994,
                        type: "Drama",
                        description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                        poster: "https://images.unsplash.com/photo-1489599732936-0a7c3fd5e8d1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/6hB3S9bIaco"
                    },
                    {
                        title: "The Godfather",
                        year: 1972,
                        type: "Drama",
                        description: "The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son.",
                        poster: "https://images.unsplash.com/photo-1478720568477-152d9b164e26?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/sY1S34973zA"
                    }
                ];

                const moviesRef = this.db.ref('movies');
                sampleMovies.forEach(movie => {
                    moviesRef.push(movie);
                });
            }

            initializeSampleSeries() {
                const sampleSeries = [
                    {
                        title: "Stranger Things",
                        year: 2016,
                        type: "Sci-Fi",
                        description: "When a young boy disappears, his mother, a police chief and his friends must confront terrifying supernatural forces in order to get him back.",
                        poster: "https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        seasons: [
                            {
                                seasonNumber: 1,
                                episodes: [
                                    { episodeNumber: 1, title: "The Vanishing of Will Byers", videoUrl: "https://www.youtube.com/embed/b9EkMc79ZSU" },
                                    { episodeNumber: 2, title: "The Weirdo on Maple Street", videoUrl: "https://www.youtube.com/embed/XWxyRG_tckY" }
                                ]
                            }
                        ]
                    }
                ];

                const seriesRef = this.db.ref('series');
                sampleSeries.forEach(series => {
                    seriesRef.push(series);
                });
            }

            saveMovieToFirebase(movieData) {
                if (!this.firebaseConnected) {
                    alert('Not connected to Firebase. Please check your internet connection.');
                    return;
                }

                if (this.editingMovieId) {
                    // Update existing movie
                    this.db.ref('movies/' + this.editingMovieId).update(movieData)
                        .then(() => {
                            console.log('Movie updated successfully');
                        })
                        .catch((error) => {
                            console.error('Error updating movie:', error);
                            alert('Error updating movie: ' + error.message);
                        });
                } else {
                    // Add new movie
                    this.db.ref('movies').push(movieData)
                        .then(() => {
                            console.log('Movie added successfully');
                        })
                        .catch((error) => {
                            console.error('Error adding movie:', error);
                            alert('Error adding movie: ' + error.message);
                        });
                }
            }

            saveSeriestoFirebase(seriesData) {
                if (!this.firebaseConnected) {
                    alert('Not connected to Firebase. Please check your internet connection.');
                    return;
                }

                if (this.editingSeriesId) {
                    // Update existing series
                    this.db.ref('series/' + this.editingSeriesId).update(seriesData)
                        .then(() => {
                            console.log('Series updated successfully');
                        })
                        .catch((error) => {
                            console.error('Error updating series:', error);
                            alert('Error updating series: ' + error.message);
                        });
                } else {
                    // Add new series
                    this.db.ref('series').push(seriesData)
                        .then(() => {
                            console.log('Series added successfully');
                        })
                        .catch((error) => {
                            console.error('Error adding series:', error);
                            alert('Error adding series: ' + error.message);
                        });
                }
            }

            deleteMovieFromFirebase(movieId) {
                if (!this.firebaseConnected) {
                    alert('Not connected to Firebase. Please check your internet connection.');
                    return;
                }

                if (confirm('Are you sure you want to delete this movie? This action cannot be undone.')) {
                    this.db.ref('movies/' + movieId).remove()
                        .then(() => {
                            console.log('Movie deleted successfully');
                        })
                        .catch((error) => {
                            console.error('Error deleting movie:', error);
                            alert('Error deleting movie: ' + error.message);
                        });
                }
            }

            deleteSeriesFromFirebase(seriesId) {
                if (!this.firebaseConnected) {
                    alert('Not connected to Firebase. Please check your internet connection.');
                    return;
                }

                if (confirm('Are you sure you want to delete this series? This action cannot be undone.')) {
                    // CORRIG : Suppression du '/' en trop qui causait la SyntaxError
                    this.db.ref('series/' + seriesId).remove()
                        .then(() => {
                            console.log('Series deleted successfully');
                        })
                        .catch((error) => {
                            console.error('Error deleting series:', error);
                            alert('Error deleting series: ' + error.message);
                        });
                }
            }

            updateUI() {
                this.renderContent();
                this.updateCollectionCounts();
                this.updateAdminStats();
            }

            bindEvents() {
                // Movie search input
                const movieSearchInput = document.getElementById('movieSearchInput');
                if (movieSearchInput) {
                    movieSearchInput.addEventListener('input', (e) => {
                        this.currentMovieSearch = e.target.value.toLowerCase();
                        this.currentPage = 1;
                        this.renderMovies();
                    });
                }

                // Series search input
                const seriesSearchInput = document.getElementById('seriesSearchInput');
                if (seriesSearchInput) {
                    seriesSearchInput.addEventListener('input', (e) => {
                        this.currentSeriesSearch = e.target.value.toLowerCase();
                        this.seriesCurrentPage = 1;
                        this.renderSeries();
                    });
                }

                // Close modal when clicking outside
                window.addEventListener('click', (e) => {
                    const modal = document.getElementById('videoModal');
                    if (e.target === modal) {
                        this.closeVideoModal();
                    }
                });

                // Escape key to close modal
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeVideoModal();
                    }
                });
            }

            initNavbarScroll() {
                const navbar = document.getElementById('mainNavbar');
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        navbar.classList.add('scrolled');
                    } else {
                        navbar.classList.remove('scrolled');
                    }
                });
            }

            initAnimations() {
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate-slide-up');
                        }
                    });
                }, observerOptions);

                document.querySelectorAll('.content-card, .collection-card').forEach(el => {
                    observer.observe(el);
                });
            }

            showLoadingOverlay() {
                document.getElementById('loadingOverlay').classList.remove('hidden');
            }

            hideLoadingOverlay() {
                document.getElementById('loadingOverlay').classList.add('hidden');
            }

            showHome() {
                this.currentView = 'home';
                document.getElementById('mainContent').classList.remove('hidden');
                document.getElementById('moviesPage').classList.add('hidden');
                document.getElementById('seriesPage').classList.add('hidden');
                document.getElementById('adminSection').classList.add('hidden');
                this.renderNewContent();
                this.updateCollectionCounts();
            }

            showMovies() {
                this.currentView = 'movies';
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('moviesPage').classList.remove('hidden');
                document.getElementById('seriesPage').classList.add('hidden');
                document.getElementById('adminSection').classList.add('hidden');
                this.renderMovies();
            }

            showSeries() {
                this.currentView = 'series';
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('moviesPage').classList.add('hidden');
                document.getElementById('seriesPage').classList.remove('hidden');
                document.getElementById('adminSection').classList.add('hidden');
                this.renderSeries();
            }

            showCollections() {
                this.showHome();
                document.querySelector('#collectionsSection').scrollIntoView({ behavior: 'smooth' });
            }

            toggleAdmin() {
                this.currentView = 'admin';
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('moviesPage').classList.add('hidden');
                document.getElementById('seriesPage').classList.add('hidden');
                document.getElementById('adminSection').classList.remove('hidden');
                
                if (this.isAdminLoggedIn) {
                    this.showAdminPanel();
                } else {
                    this.showAdminLogin();
                }
            }

            showAdminLogin() {
                document.getElementById('adminLogin').classList.remove('hidden');
                document.getElementById('adminPanel').classList.add('hidden');
            }

            showAdminPanel() {
                document.getElementById('adminLogin').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                this.renderAdminContent();
                this.updateAdminStats();
            }

            // MODIFI : Fonction de login scurise
            adminLogin() {
                const email = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;

                if (!email || !password) {
                    alert('Veuillez entrer un email et un mot de passe.');
                    return;
                }

                this.auth.signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        // Russite ! onAuthStateChanged va s'occuper du reste.
                        console.log('Admin login successful', userCredential.user);
                        document.getElementById('adminUsername').value = '';
                        document.getElementById('adminPassword').value = '';
                    })
                    .catch((error) => {
                        console.error('Admin login error:', error);
                        alert('Erreur de connexion: ' + error.message);
                    });
            }

            // MODIFI : Fonction de logout scurise
            adminLogout() {
                this.auth.signOut().then(() => {
                    // onAuthStateChanged va s'occuper du reste.
                    console.log('Admin logged out');
                }).catch((error) => {
                    console.error('Logout error:', error);
                    alert('Erreur de dconnexion: ' + error.message);
                });
            }

            // Movie Form Methods
            toggleNewMovieForm() {
                const form = document.getElementById('movieForm');
                const toggle = document.getElementById('newMovieToggle');
                
                // Hide series form if open
                if (this.newSeriesToggleActive) {
                    this.toggleNewSeriesForm();
                }
                
                if (this.newMovieToggleActive) {
                    form.classList.add('hidden');
                    toggle.innerHTML = '<i class="fas fa-plus"></i> Add New Movie';
                    toggle.classList.remove('active');
                    this.newMovieToggleActive = false;
                    this.cancelMovieEdit();
                } else {
                    form.classList.remove('hidden');
                    toggle.innerHTML = '<i class="fas fa-minus"></i> Cancel';
                    toggle.classList.add('active');
                    this.newMovieToggleActive = true;
                }
            }

            saveMovie(event) {
                event.preventDefault();
                
                const title = document.getElementById('movieTitle').value;
                const year = parseInt(document.getElementById('movieYear').value);
                const type = document.getElementById('movieType').value;
                const poster = document.getElementById('moviePoster').value;
                const videoUrl = document.getElementById('movieLink').value;
                const description = document.getElementById('movieDescription').value;

                const movieData = {
                    title,
                    year,
                    type,
                    poster,
                    videoUrl,
                    description
                };

                this.saveMovieToFirebase(movieData);
                this.resetMovieForm();
                this.toggleNewMovieForm();
            }

            editMovie(id) {
                const movie = this.movies.find(m => m.id === id);
                if (movie) {
                    this.editingMovieId = id;
                    document.getElementById('movieTitle').value = movie.title;
                    document.getElementById('movieYear').value = movie.year;
                    document.getElementById('movieType').value = movie.type;
                    document.getElementById('moviePoster').value = movie.poster;
                    document.getElementById('movieLink').value = movie.videoUrl;
                    document.getElementById('movieDescription').value = movie.description;
                    document.getElementById('movieFormTitle').textContent = 'Edit Movie';
                    
                    if (!this.newMovieToggleActive) {
                        this.toggleNewMovieForm();
                    }
                }
            }

            deleteMovie(id) {
                this.deleteMovieFromFirebase(id);
            }

            cancelMovieEdit() {
                this.editingMovieId = null;
                this.resetMovieForm();
                document.getElementById('movieFormTitle').textContent = 'Add New Movie';
            }

            resetMovieForm() {
                document.getElementById('movieTitle').value = '';
                document.getElementById('movieYear').value = '';
                document.getElementById('movieType').value = '';
                document.getElementById('moviePoster').value = '';
                document.getElementById('movieLink').value = '';
                document.getElementById('movieDescription').value = '';
            }

            // Series Form Methods
            toggleNewSeriesForm() {
                const form = document.getElementById('seriesForm');
                const toggle = document.getElementById('newSeriesToggle');
                
                // Hide movie form if open
                if (this.newMovieToggleActive) {
                    this.toggleNewMovieForm();
                }
                
                if (this.newSeriesToggleActive) {
                    form.classList.add('hidden');
                    toggle.innerHTML = '<i class="fas fa-plus"></i> Add New Series';
                    toggle.classList.remove('active');
                    this.newSeriesToggleActive = false;
                    this.cancelSeriesEdit();
                } else {
                    form.classList.remove('hidden');
                    toggle.innerHTML = '<i class="fas fa-minus"></i> Cancel';
                    toggle.classList.add('active');
                    this.newSeriesToggleActive = true;
                    this.addSeason(); // Add initial season
                }
            }

            addSeason() {
                this.seasonCount++;
                const container = document.getElementById('seasonsContainer');
                
                const seasonDiv = document.createElement('div');
                seasonDiv.className = 'seasons-container';
                seasonDiv.setAttribute('data-season', this.seasonCount);
                
                seasonDiv.innerHTML = `
                    <div class="season-header">
                        <div class="season-title">Season ${this.seasonCount}</div>
                        <button type="button" class="btn-remove" onclick="app.removeSeason(${this.seasonCount})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="episodes-container" id="episodes-${this.seasonCount}">
                        <div class="episode-row">
                            <div class="form-group">
                                <label class="form-label">Episode 1</label>
                                <input type="text" class="form-input" placeholder="Episode title" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Video URL</label>
                                <input type="url" class="form-input" placeholder="https://..." required>
                            </div>
                            <div></div>
                            <button type="button" class="btn-add" onclick="app.addEpisode(${this.seasonCount})">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(seasonDiv);
            }

            removeSeason(seasonNumber) {
                const seasonDiv = document.querySelector(`[data-season="${seasonNumber}"]`);
                if (seasonDiv) {
                    seasonDiv.remove();
                }
            }

            addEpisode(seasonNumber) {
                const container = document.getElementById(`episodes-${seasonNumber}`);
                const episodeCount = container.children.length + 1;
                
                const episodeDiv = document.createElement('div');
                episodeDiv.className = 'episode-row';
                
                episodeDiv.innerHTML = `
                    <div class="form-group">
                        <label class="form-label">Episode ${episodeCount}</label>
                        <input type="text" class="form-input" placeholder="Episode title" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Video URL</label>
                        <input type="url" class="form-input" placeholder="https://..." required>
                    </div>
                    <div></div>
                    <button type="button" class="btn-remove" onclick="this.parentElement.remove()">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                
                container.appendChild(episodeDiv);
            }

            saveSeries(event) {
                event.preventDefault();
                
                const title = document.getElementById('seriesTitle').value;
                const year = parseInt(document.getElementById('seriesYear').value);
                const type = document.getElementById('seriesType').value;
                const poster = document.getElementById('seriesPoster').value;
                const description = document.getElementById('seriesDescription').value;

                // Collect seasons and episodes data
                const seasons = [];
                const seasonContainers = document.querySelectorAll('.seasons-container');
                
                seasonContainers.forEach((seasonDiv, seasonIndex) => {
                    const episodeRows = seasonDiv.querySelectorAll('.episode-row');
                    const episodes = [];
                    
                    episodeRows.forEach((episodeRow, episodeIndex) => {
                        const inputs = episodeRow.querySelectorAll('.form-input');
                        if (inputs.length >= 2 && inputs[0].value.trim() && inputs[1].value.trim()) {
                            episodes.push({
                                episodeNumber: episodeIndex + 1,
                                title: inputs[0].value.trim(),
                                videoUrl: inputs[1].value.trim()
                            });
                        }
                    });
                    
                    if (episodes.length > 0) {
                        seasons.push({
                            seasonNumber: seasonIndex + 1,
                            episodes: episodes
                        });
                    }
                });

                if (seasons.length === 0) {
                    alert('Please add at least one season with episodes.');
                    return;
                }

                const seriesData = {
                    title,
                    year,
                    type,
                    poster,
                    description,
                    seasons
                };

                this.saveSeriestoFirebase(seriesData);
                this.resetSeriesForm();
                this.toggleNewSeriesForm();
            }

            editSeries(id) {
                const series = this.series.find(s => s.id === id);
                if (series) {
                    this.editingSeriesId = id;
                    document.getElementById('seriesTitle').value = series.title;
                    document.getElementById('seriesYear').value = series.year;
                    document.getElementById('seriesType').value = series.type;
                    document.getElementById('seriesPoster').value = series.poster;
                    document.getElementById('seriesDescription').value = series.description;
                    document.getElementById('seriesFormTitle').textContent = 'Edit Series';
                    
                    // Clear existing seasons
                    document.getElementById('seasonsContainer').innerHTML = '';
                    this.seasonCount = 0;
                    
                    // Add seasons from existing data
                    if (series.seasons) {
                        series.seasons.forEach((season, seasonIndex) => {
                            this.addSeason();
                            const episodesContainer = document.getElementById(`episodes-${this.seasonCount}`);
                            episodesContainer.innerHTML = '';
                            
                            season.episodes.forEach((episode, episodeIndex) => {
                                const episodeDiv = document.createElement('div');
                                episodeDiv.className = 'episode-row';
                                
                                episodeDiv.innerHTML = `
                                    <div class="form-group">
                                        <label class="form-label">Episode ${episodeIndex + 1}</label>
                                        <input type="text" class="form-input" placeholder="Episode title" value="${episode.title}" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Video URL</label>
                                        <input type="url" class="form-input" placeholder="https://..." value="${episode.videoUrl}" required>
                                    </div>
                                    <div></div>
                                    ${episodeIndex === 0 ? 
                                        `<button type="button" class="btn-add" onclick="app.addEpisode(${this.seasonCount})"><i class="fas fa-plus"></i></button>` :
                                        `<button type="button" class="btn-remove" onclick="this.parentElement.remove()"><i class="fas fa-trash"></i></button>`
                                    }
                                `;
                                
                                episodesContainer.appendChild(episodeDiv);
                            });
                        });
                    }
                    
                    if (!this.newSeriesToggleActive) {
                        this.toggleNewSeriesForm();
                    }
                }
            }

            deleteSeries(id) {
                this.deleteSeriesFromFirebase(id);
            }

            cancelSeriesEdit() {
                this.editingSeriesId = null;
                this.resetSeriesForm();
                document.getElementById('seriesFormTitle').textContent = 'Add New Series';
            }

            resetSeriesForm() {
                document.getElementById('seriesTitle').value = '';
                document.getElementById('seriesYear').value = '';
                document.getElementById('seriesType').value = '';
                document.getElementById('seriesPoster').value = '';
                document.getElementById('seriesDescription').value = '';
                document.getElementById('seasonsContainer').innerHTML = '';
                this.seasonCount = 0;
            }

            // Filter Methods
            filterMovies(filter) {
                this.currentMovieFilter = filter;
                this.currentPage = 1;
                
                // Update active filter button
                document.querySelectorAll('#movieFilters .filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                this.renderMovies();
            }

            filterSeries(filter) {
                this.currentSeriesFilter = filter;
                this.seriesCurrentPage = 1;
                
                // Update active filter button
                document.querySelectorAll('#seriesFilters .filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                this.renderSeries();
            }

            filterContent(filter, type) {
                if (type === 'movies') {
                    this.currentMovieFilter = filter;
                    this.showMovies();
                } else {
                    this.currentSeriesFilter = filter;
                    this.showSeries();
                }
            }

            getFilteredMovies() {
                let filtered = this.movies;

                // Apply search filter
                if (this.currentMovieSearch) {
                    filtered = filtered.filter(movie =>
                        movie.title.toLowerCase().includes(this.currentMovieSearch)
                    );
                }

                // Apply type filter
                if (this.currentMovieFilter !== 'all') {
                    filtered = filtered.filter(movie => movie.type === this.currentMovieFilter);
                }

                return filtered;
            }

            getFilteredSeries() {
                let filtered = this.series;

                // Apply search filter
                if (this.currentSeriesSearch) {
                    filtered = filtered.filter(series =>
                        series.title.toLowerCase().includes(this.currentSeriesSearch)
                    );
                }

                // Apply type filter
                if (this.currentSeriesFilter !== 'all') {
                    filtered = filtered.filter(series => series.type === this.currentSeriesFilter);
                }

                return filtered;
            }

            // Render Methods
            renderNewContent() {
                const container = document.getElementById('newContentGrid');
                const newMovies = this.movies
                    .sort((a, b) => b.year - a.year)
                    .slice(0, 3);
                const newSeries = this.series
                    .sort((a, b) => b.year - a.year)
                    .slice(0, 3);
                
                const newContent = [...newMovies, ...newSeries]
                    .sort((a, b) => b.year - a.year)
                    .slice(0, 6);

                container.innerHTML = newContent.map(content => this.createContentCard(content, false)).join('');
            }

            renderContent() {
                this.renderMovies();
                this.renderSeries();
                this.renderAdminContent();
                this.renderNewContent();
            }

            renderMovies() {
                const container = document.getElementById('moviesGrid');
                const filtered = this.getFilteredMovies();
                
                // Pagination
                const startIndex = (this.currentPage - 1) * this.moviesPerPage;
                const endIndex = startIndex + this.moviesPerPage;
                const paginatedMovies = filtered.slice(startIndex, endIndex);

                container.innerHTML = paginatedMovies.map(movie => 
                    this.createContentCard(movie, this.isAdminLoggedIn)
                ).join('');

                this.renderMoviePagination(filtered.length);
            }

            renderSeries() {
                const container = document.getElementById('seriesGrid');
                const filtered = this.getFilteredSeries();
                
                // Pagination
                const startIndex = (this.seriesCurrentPage - 1) * this.seriesPerPage;
                const endIndex = startIndex + this.seriesPerPage;
                const paginatedSeries = filtered.slice(startIndex, endIndex);

                container.innerHTML = paginatedSeries.map(series => 
                    this.createContentCard(series, this.isAdminLoggedIn)
                ).join('');

                this.renderSeriesPagination(filtered.length);
            }

            renderAdminContent() {
                if (!this.isAdminLoggedIn) return;
                
                const container = document.getElementById('adminContentGrid');
                const allContent = [
                    ...this.movies.map(m => ({ ...m, contentType: 'movie' })),
                    ...this.series.map(s => ({ ...s, contentType: 'series' }))
                ];
                
                container.innerHTML = allContent.map(content => 
                    this.createContentCard(content, true)
                ).join('');
            }

            createContentCard(content, showAdminControls) {
                const isSeries = content.seasons || content.contentType === 'series';
                const watchFunction = isSeries ? `app.watchSeries('${content.id}')` : `app.watchMovie('${content.id}')`;
                const editFunction = isSeries ? `app.editSeries('${content.id}')` : `app.editMovie('${content.id}')`;
                const deleteFunction = isSeries ? `app.deleteSeries('${content.id}')` : `app.deleteMovie('${content.id}')`;
                
                // Les contrles admin ne s'affichent que si showAdminControls est vrai
                // ET this.isAdminLoggedIn est vrai (double scurit)
                const showButtons = showAdminControls && this.isAdminLoggedIn;

                return `
                    <div class="content-card animate-scale-in">
                        ${isSeries ? '<div class="series-badge">Series</div>' : ''}
                        <img src="${content.poster}" alt="${content.title}" class="content-poster" loading="lazy">
                        <div class="content-info">
                            <div class="content-title">${content.title}</div>
                            <div class="content-meta">
                                <span>${content.year}</span>
                                <span>${content.type}</span>
                            </div>
                            <div class="content-description">${content.description}</div>
                            <div class="content-actions">
                                <button class="btn-watch" onclick="${watchFunction}">
                                    <i class="fas fa-play"></i> Watch
                                </button>
                                ${showButtons ? `
                                    <button class="btn-edit" onclick="${editFunction}" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-delete" onclick="${deleteFunction}" title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }

            renderMoviePagination(totalMovies) {
                const container = document.getElementById('moviePaginationContainer');
                const totalPages = Math.ceil(totalMovies / this.moviesPerPage);

                if (totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }

                let paginationHTML = `
                    <button class="pagination-btn" ${this.currentPage === 1 ? 'disabled' : ''} 
                            onclick="app.goToMoviePage(${this.currentPage - 1})">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                `;

                // Show page numbers
                for (let i = 1; i <= totalPages; i++) {
                    if (i === 1 || i === totalPages || (i >= this.currentPage - 2 && i <= this.currentPage + 2)) {
                        paginationHTML += `
                            <button class="pagination-btn ${i === this.currentPage ? 'active' : ''}" 
                                    onclick="app.goToMoviePage(${i})">
                                ${i}
                            </button>
                        `;
                    } else if (i === this.currentPage - 3 || i === this.currentPage + 3) {
                        paginationHTML += '<span class="pagination-btn" style="border: none; cursor: default;">...</span>';
                    }
                }

                paginationHTML += `
                    <button class="pagination-btn" ${this.currentPage === totalPages ? 'disabled' : ''} 
                            onclick="app.goToMoviePage(${this.currentPage + 1})">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                `;

                container.innerHTML = paginationHTML;
            }

            renderSeriesPagination(totalSeries) {
                const container = document.getElementById('seriesPaginationContainer');
                const totalPages = Math.ceil(totalSeries / this.seriesPerPage);

                if (totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }

                let paginationHTML = `
                    <button class="pagination-btn" ${this.seriesCurrentPage === 1 ? 'disabled' : ''} 
                            onclick="app.goToSeriesPage(${this.seriesCurrentPage - 1})">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                `;

                // Show page numbers
                for (let i = 1; i <= totalPages; i++) {
                    if (i === 1 || i === totalPages || (i >= this.seriesCurrentPage - 2 && i <= this.seriesCurrentPage + 2)) {
                        paginationHTML += `
                            <button class="pagination-btn ${i === this.seriesCurrentPage ? 'active' : ''}" 
                                    onclick="app.goToSeriesPage(${i})">
                                ${i}
                            </button>
                        `;
                    } else if (i === this.seriesCurrentPage - 3 || i === this.seriesCurrentPage + 3) {
                        paginationHTML += '<span class="pagination-btn" style="border: none; cursor: default;">...</span>';
                    }
                }

                paginationHTML += `
                    <button class="pagination-btn" ${this.seriesCurrentPage === totalPages ? 'disabled' : ''} 
                            onclick="app.goToSeriesPage(${this.seriesCurrentPage + 1})">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                `;

                container.innerHTML = paginationHTML;
            }

            goToMoviePage(page) {
                this.currentPage = page;
                this.renderMovies();
                window.scrollTo(0, 0);
            }

            goToSeriesPage(page) {
                this.seriesCurrentPage = page;
                this.renderSeries();
                window.scrollTo(0, 0);
            }

            updateCollectionCounts() {
                const movieCounts = {
                    drama: this.movies.filter(m => m.type === 'Drama').length,
                    action: this.movies.filter(m => m.type === 'Action').length,
                    comedy: this.movies.filter(m => m.type === 'Comedy').length,
                    thriller: this.movies.filter(m => m.type === 'Thriller').length
                };

                const seriesCounts = {
                    drama: this.series.filter(s => s.type === 'Drama').length,
                    action: this.series.filter(s => s.type === 'Action').length,
                    comedy: this.series.filter(s => s.type === 'Comedy').length,
                    thriller: this.series.filter(s => s.type === 'Thriller').length
                };

                const totalCounts = {
                    drama: movieCounts.drama + seriesCounts.drama,
                    action: movieCounts.action + seriesCounts.action,
                    comedy: movieCounts.comedy + seriesCounts.comedy,
                    thriller: movieCounts.thriller + seriesCounts.thriller
                };

                document.getElementById('dramaCount').textContent = `${totalCounts.drama} movies & series`;
                document.getElementById('actionCount').textContent = `${totalCounts.action} movies & series`;
                document.getElementById('comedyCount').textContent = `${totalCounts.comedy} movies & series`;
                document.getElementById('thrillerCount').textContent = `${totalCounts.thriller} movies & series`;
            }

            updateAdminStats() {
                if (!this.isAdminLoggedIn) return;

                const totalSeasons = this.series.reduce((sum, series) => {
                    return sum + (series.seasons ? series.seasons.length : 0);
                }, 0);

                const allGenres = new Set([
                    ...this.movies.map(m => m.type),
                    ...this.series.map(s => s.type)
                ]);

                document.getElementById('totalMovies').textContent = this.movies.length;
                document.getElementById('totalSeries').textContent = this.series.length;
                document.getElementById('totalSeasons').textContent = totalSeasons;
                document.getElementById('totalGenres').textContent = allGenres.size;
            }

            // Watch Content Methods
            watchMovie(id) {
                const movie = this.movies.find(m => m.id === id);
                if (movie) {
                    this.currentContent = movie;
                    document.getElementById('contentPlayer').src = movie.videoUrl;
                    document.getElementById('modalTitle').textContent = movie.title;
                    document.getElementById('modalYear').textContent = movie.year;
                    document.getElementById('modalType').textContent = movie.type;
                    document.getElementById('modalDescription').textContent = movie.description;
                    document.getElementById('episodeSelector').classList.add('hidden');
                    document.getElementById('videoModal').classList.add('show');
                    document.body.style.overflow = 'hidden';
                }
            }

            watchSeries(id) {
                const series = this.series.find(s => s.id === id);
                if (series) {
                    this.currentContent = series;
                    document.getElementById('contentPlayer').src = '';
                    document.getElementById('modalTitle').textContent = series.title;
                    document.getElementById('modalYear').textContent = series.year;
                    document.getElementById('modalType').textContent = series.type;
                    document.getElementById('modalDescription').textContent = series.description;
                    
                    // Setup season selector - FIXED: Using correct ID
                    const seasonSelector = document.getElementById('seasonSelect');
                    seasonSelector.innerHTML = '<option value="">Select Season</option>';
                    
                    if (series.seasons) {
                        series.seasons.forEach(season => {
                            const option = document.createElement('option');
                            option.value = season.seasonNumber;
                            option.textContent = `Season ${season.seasonNumber}`;
                            seasonSelector.appendChild(option);
                        });
                    }
                    
                    document.getElementById('episodeSelector').classList.remove('hidden');
                    document.getElementById('videoModal').classList.add('show');
                    document.body.style.overflow = 'hidden';
                }
            }

            updateEpisodeOptions() {
                // FIXED: Using correct IDs
                const seasonNumber = parseInt(document.getElementById('seasonSelect').value);
                const episodeSelector = document.getElementById('episodeSelect');
                
                episodeSelector.innerHTML = '<option value="">Select Episode</option>';
                
                if (this.currentContent && this.currentContent.seasons && seasonNumber) {
                    const season = this.currentContent.seasons.find(s => s.seasonNumber === seasonNumber);
                    if (season && season.episodes) {
                        season.episodes.forEach(episode => {
                            const option = document.createElement('option');
                            option.value = episode.episodeNumber;
                            option.textContent = `Episode ${episode.episodeNumber}: ${episode.title}`;
                            option.dataset.videoUrl = episode.videoUrl;
                            episodeSelector.appendChild(option);
                        });
                    }
                }
            }

            playSelectedEpisode() {
                // FIXED: Using correct IDs
                const seasonNumber = parseInt(document.getElementById('seasonSelect').value);
                const episodeNumber = parseInt(document.getElementById('episodeSelect').value);
                
                if (!seasonNumber || !episodeNumber) {
                    alert('Please select both season and episode.');
                    return;
                }
                
                if (this.currentContent && this.currentContent.seasons) {
                    const season = this.currentContent.seasons.find(s => s.seasonNumber === seasonNumber);
                    if (season && season.episodes) {
                        const episode = season.episodes.find(e => e.episodeNumber === episodeNumber);
                        if (episode) {
                            document.getElementById('contentPlayer').src = episode.videoUrl;
                        }
                    }
                }
            }

            closeVideoModal() {
                document.getElementById('videoModal').classList.remove('show');
                document.getElementById('contentPlayer').src = '';
                document.body.style.overflow = '';
                this.currentContent = null;
            }
        }

        // Initialize the app
        const app = new OussaStreamApp();

        // Hide connection status after 5 seconds if connected
        setTimeout(() => {
            const status = document.getElementById('connectionStatus');
            if (status.classList.contains('connected')) {
                status.style.opacity = '0';
                setTimeout(() => status.style.display = 'none', 300);
            }
        }, 5000);
    </script>
</body>
</html>
