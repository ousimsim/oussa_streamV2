<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OussaStream</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/MD3HFP46/Untitled-Design-1-Edited-Edited.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Netflix Theme Colors */
            --netflix-red: #E50914;
            --netflix-dark: #221F1F;
            --netflix-darker: #141414;
            --netflix-gray: #564D4D;
            --netflix-light: #F5F5F1;
            
            /* Shadows */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.25);
            --shadow-xl: 0 12px 48px rgba(0, 0, 0, 0.35);
            
            /* Transitions */
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--netflix-darker);
            color: var(--netflix-light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Netflix Navbar */
        .netflix-navbar {
            background: linear-gradient(180deg, rgba(0,0,0,0.7) 0%, transparent 100%);
            backdrop-filter: blur(10px);
            transition: var(--transition);
            padding: 1rem 0;
            z-index: 1000;
        }

        .netflix-navbar.scrolled {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-md);
        }

        .navbar-brand img {
            height: 45px;
            transition: var(--transition);
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .navbar-nav .nav-link {
            color: var(--netflix-light) !important;
            font-weight: 500;
            position: relative;
            transition: var(--transition);
            margin: 0 0.5rem;
        }

        .navbar-nav .nav-link:hover {
            color: var(--netflix-red) !important;
            transform: translateY(-2px);
        }

        .navbar-nav .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 50%;
            background: var(--netflix-red);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .navbar-nav .nav-link:hover::after {
            width: 100%;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--netflix-darker);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(229, 9, 20, 0.3);
            border-radius: 50%;
            border-top-color: var(--netflix-red);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 1rem;
        }

        .loading-text {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--netflix-light);
            text-align: center;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, rgba(20,20,20,0.8) 0%, rgba(34,31,31,0.9) 100%),
                        url('https://images.unsplash.com/photo-1440404653325-ab127d49abc1?ixlib=rb-4.0.3') center/cover;
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--netflix-red) 0%, transparent 70%);
            opacity: 0.1;
            animation: heroShimmer 3s ease-in-out infinite alternate;
        }

        @keyframes heroShimmer {
            from { opacity: 0.1; }
            to { opacity: 0.2; }
        }

        .hero-content {
            z-index: 2;
            position: relative;
        }

        .hero-title {
            font-family: 'Poppins', sans-serif;
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--netflix-light) 0%, var(--netflix-red) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: heroTitleSlide 1s ease-out;
        }

        @keyframes heroTitleSlide {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: var(--netflix-gray);
            margin-bottom: 2rem;
            animation: heroSubtitleSlide 1s ease-out 0.3s both;
        }

        @keyframes heroSubtitleSlide {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cta-button {
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            color: white;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
            animation: ctaButtonSlide 1s ease-out 0.6s both;
        }

        @keyframes ctaButtonSlide {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }

        .cta-button:hover::before {
            left: 100%;
        }

        /* Sections */
        .section {
            padding: 4rem 0;
            position: relative;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--netflix-light);
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            border-radius: 2px;
        }

        /* Search and Filter */
        .controls-container {
            background: rgba(34, 31, 31, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: var(--shadow-md);
        }

        .search-container {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .search-input {
            background: rgba(20, 20, 20, 0.8);
            border: 2px solid rgba(86, 77, 77, 0.5);
            color: var(--netflix-light);
            border-radius: 25px;
            padding: 0.8rem 1.2rem 0.8rem 3rem;
            width: 100%;
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
            background: rgba(20, 20, 20, 1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--netflix-gray);
            pointer-events: none;
        }

        .filter-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            background: rgba(86, 77, 77, 0.3);
            color: var(--netflix-light);
            border: 2px solid transparent;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: rgba(229, 9, 20, 0.2);
            border-color: var(--netflix-red);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--netflix-red);
            color: white;
            box-shadow: var(--shadow-md);
        }

        /* Movie Grid */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .movie-card {
            background: rgba(34, 31, 31, 0.9);
            border-radius: 15px;
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            position: relative;
            cursor: pointer;
        }

        .movie-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-xl);
        }

        .movie-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(229, 9, 20, 0.1) 100%);
            opacity: 0;
            transition: var(--transition);
            z-index: 1;
        }

        .movie-card:hover::before {
            opacity: 1;
        }

        .movie-poster {
            width: 100%;
            height: 400px;
            object-fit: cover;
            transition: var(--transition);
        }

        .movie-card:hover .movie-poster {
            transform: scale(1.1);
        }

        .movie-info {
            padding: 1.5rem;
            position: relative;
            z-index: 2;
        }

        .movie-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--netflix-light);
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .movie-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            color: var(--netflix-gray);
            font-size: 0.9rem;
        }

        .movie-description {
            color: var(--netflix-gray);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .movie-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-watch {
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
        }

        .btn-watch:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-edit, .btn-delete {
            padding: 0.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            width: 40px;
            height: 35px;
        }

        .btn-edit {
            background: rgba(52, 152, 219, 0.8);
            color: white;
        }

        .btn-edit:hover {
            background: #3498db;
            transform: scale(1.1);
        }

        .btn-delete {
            background: rgba(231, 76, 60, 0.8);
            color: white;
        }

        .btn-delete:hover {
            background: #e74c3c;
            transform: scale(1.1);
        }

        /* Pagination */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .pagination-btn {
            background: rgba(34, 31, 31, 0.8);
            color: var(--netflix-light);
            border: 2px solid transparent;
            padding: 0.5rem 0.8rem;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            min-width: 40px;
        }

        .pagination-btn:hover {
            background: rgba(229, 9, 20, 0.2);
            border-color: var(--netflix-red);
        }

        .pagination-btn.active {
            background: var(--netflix-red);
            color: white;
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Admin Panel */
        .admin-section {
            background: rgba(34, 31, 31, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(86, 77, 77, 0.3);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(229, 9, 20, 0.3);
        }

        .admin-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--netflix-red);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1) 0%, rgba(86, 77, 77, 0.1) 100%);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(229, 9, 20, 0.2);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--netflix-red);
        }

        .stat-label {
            color: var(--netflix-gray);
            margin-top: 0.5rem;
        }

        .login-form {
            background: rgba(20, 20, 20, 0.8);
            padding: 2rem;
            border-radius: 15px;
            max-width: 400px;
            margin: 0 auto;
            box-shadow: var(--shadow-lg);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--netflix-light);
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            background: rgba(34, 31, 31, 0.8);
            border: 2px solid rgba(86, 77, 77, 0.5);
            color: var(--netflix-light);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--netflix-red) 0%, #FF6B35 100%);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: rgba(86, 77, 77, 0.8);
            color: var(--netflix-light);
            border: 2px solid transparent;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-left: 0.5rem;
        }

        .btn-secondary:hover {
            background: rgba(86, 77, 77, 1);
            border-color: var(--netflix-red);
        }

        .movie-form {
            background: rgba(20, 20, 20, 0.8);
            padding: 2rem;
            border-radius: 15px;
            margin-top: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .form-textarea {
            width: 100%;
            background: rgba(34, 31, 31, 0.8);
            border: 2px solid rgba(86, 77, 77, 0.5);
            color: var(--netflix-light);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: var(--transition);
            resize: vertical;
            min-height: 100px;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--netflix-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.2);
        }

        /* Collections Section */
        .collections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .collection-card {
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1) 0%, rgba(34, 31, 31, 0.9) 100%);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(229, 9, 20, 0.2);
            cursor: pointer;
        }

        .collection-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.2) 0%, rgba(34, 31, 31, 0.9) 100%);
        }

        .collection-icon {
            font-size: 3rem;
            color: var(--netflix-red);
            margin-bottom: 1rem;
        }

        .collection-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--netflix-light);
            margin-bottom: 0.5rem;
        }

        .collection-count {
            color: var(--netflix-gray);
            font-size: 0.9rem;
        }

        /* Footer */
        .footer {
            background: linear-gradient(135deg, var(--netflix-darker) 0%, var(--netflix-dark) 100%);
            padding: 3rem 0 2rem;
            border-top: 1px solid rgba(86, 77, 77, 0.3);
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--netflix-red), transparent);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            color: var(--netflix-red);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .footer-section p, .footer-section a {
            color: var(--netflix-gray);
            text-decoration: none;
            line-height: 1.8;
            transition: var(--transition);
        }

        .footer-section a:hover {
            color: var(--netflix-light);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(86, 77, 77, 0.3);
            color: var(--netflix-gray);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .social-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(34, 31, 31, 0.8);
            color: var(--netflix-light);
            border-radius: 50%;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--netflix-red);
            color: white;
            transform: translateY(-3px);
        }

        /* Video Player Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 10001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            background: var(--netflix-darker);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10002;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: var(--netflix-red);
        }

        .video-container {
            width: 100%;
            height: 70vh;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .modal-info {
            padding: 2rem;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--netflix-light);
            margin-bottom: 1rem;
        }

        .modal-meta {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
            color: var(--netflix-gray);
        }

        .modal-description {
            color: var(--netflix-gray);
            line-height: 1.6;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .movies-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1.5rem;
            }

            .controls-container {
                padding: 1.5rem;
            }

            .filter-buttons {
                justify-content: flex-start;
            }

            .admin-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .pagination-container {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }

            .movies-grid {
                grid-template-columns: 1fr;
            }

            .movie-card {
                margin: 0 1rem;
            }

            .section {
                padding: 2rem 0;
            }

            .controls-container {
                margin: 1rem;
            }

            .admin-section {
                margin: 1rem;
                padding: 1.5rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-slide-up {
            animation: slideInUp 0.8s ease-out;
        }

        .animate-scale-in {
            animation: scaleIn 0.6s ease-out;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-0 {
            margin-bottom: 0 !important;
        }

        .mt-3 {
            margin-top: 1rem !important;
        }

        .netflix-red-text {
            color: var(--netflix-red);
        }

        /* New Movie Toggle Button */
        .new-movie-toggle {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-md);
        }

        .new-movie-toggle:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .new-movie-toggle.active {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
        }

        /* Firebase connection status */
        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            z-index: 1000;
            transition: var(--transition);
        }

        .connection-status.connected {
            background: rgba(40, 167, 69, 0.9);
            color: white;
        }

        .connection-status.disconnected {
            background: rgba(220, 53, 69, 0.9);
            color: white;
        }

        .connection-status.connecting {
            background: rgba(255, 193, 7, 0.9);
            color: var(--netflix-dark);
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading OussaStream...</div>
    </div>

    <!-- Connection Status -->
    <div class="connection-status connecting" id="connectionStatus">
        <i class="fas fa-wifi"></i> Connecting to Firebase...
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg netflix-navbar fixed-top" id="mainNavbar">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="app.showHome()">
                <img src="https://i.ibb.co/MD3HFP46/Untitled-Design-1-Edited-Edited.png" alt="OussaStream">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showHome()">
                            <i class="fas fa-home"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showMovies()">
                            <i class="fas fa-film"></i> Movies
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.showCollections()">
                            <i class="fas fa-layer-group"></i> Collections
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="app.toggleAdmin()">
                            <i class="fas fa-cog"></i> Admin
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div id="mainContent">
        <!-- Hero Section -->
        <section class="hero-section" id="heroSection">
            <div class="container">
                <div class="row justify-content-center text-center">
                    <div class="col-lg-8 hero-content">
                        <h1 class="hero-title">OussaStream</h1>
                        <p class="hero-subtitle">Discover and stream the greatest movies of all time with our premium collection. Experience cinema like never before.</p>
                        <button class="cta-button" onclick="app.showMovies()">
                            <i class="fas fa-play"></i> Start Watching
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- New Movies Section -->
        <section class="section" id="newMoviesSection">
            <div class="container">
                <h2 class="section-title">New Movies</h2>
                <p class="text-center" style="color: var(--netflix-gray); margin-bottom: 3rem;">Recently added to our collection</p>
                <div class="movies-grid" id="newMoviesGrid">
                    <!-- New movies will be loaded here -->
                </div>
                <div class="text-center">
                    <button class="cta-button" onclick="app.showMovies()">View All Movies</button>
                </div>
            </div>
        </section>

        <!-- Collections Section -->
        <section class="section" id="collectionsSection">
            <div class="container">
                <h2 class="section-title">Browse Collections</h2>
                <div class="collections-grid" id="collectionsGrid">
                    <div class="collection-card" onclick="app.filterMovies('Drama')">
                        <div class="collection-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="collection-title">Drama</div>
                        <div class="collection-count" id="dramaCount">0 movies</div>
                    </div>
                    <div class="collection-card" onclick="app.filterMovies('Action')">
                        <div class="collection-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="collection-title">Action</div>
                        <div class="collection-count" id="actionCount">0 movies</div>
                    </div>
                    <div class="collection-card" onclick="app.filterMovies('Comedy')">
                        <div class="collection-icon">
                            <i class="fas fa-laugh"></i>
                        </div>
                        <div class="collection-title">Comedy</div>
                        <div class="collection-count" id="comedyCount">0 movies</div>
                    </div>
                    <div class="collection-card" onclick="app.filterMovies('Thriller')">
                        <div class="collection-icon">
                            <i class="fas fa-mask"></i>
                        </div>
                        <div class="collection-title">Thriller</div>
                        <div class="collection-count" id="thrillerCount">0 movies</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Movies Page -->
    <div id="moviesPage" class="hidden">
        <div style="height: 100px;"></div>
        <div class="container">
            <div class="section">
                <h2 class="section-title">All Movies</h2>
                
                <!-- Search and Filter Controls -->
                <div class="controls-container">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="searchInput" placeholder="Search movies by title...">
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="app.filterMovies('all')">All</button>
                        <button class="filter-btn" onclick="app.filterMovies('Drama')">Drama</button>
                        <button class="filter-btn" onclick="app.filterMovies('Action')">Action</button>
                        <button class="filter-btn" onclick="app.filterMovies('Comedy')">Comedy</button>
                        <button class="filter-btn" onclick="app.filterMovies('Thriller')">Thriller</button>
                        <button class="filter-btn" onclick="app.filterMovies('Horror')">Horror</button>
                        <button class="filter-btn" onclick="app.filterMovies('Sci-Fi')">Sci-Fi</button>
                        <button class="filter-btn" onclick="app.filterMovies('Romance')">Romance</button>
                    </div>
                </div>

                <!-- Movies Grid -->
                <div class="movies-grid" id="moviesGrid">
                    <!-- Movies will be loaded here -->
                </div>

                <!-- Pagination -->
                <div class="pagination-container" id="paginationContainer">
                    <!-- Pagination will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Section -->
    <div id="adminSection" class="hidden">
        <div style="height: 100px;"></div>
        <div class="container">
            <div class="admin-section">
                <!-- Admin Login -->
                <div id="adminLogin">
                    <h3 class="section-title">Admin Login</h3>
                    <div class="login-form">
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-input" id="adminUsername" placeholder="Enter username">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-input" id="adminPassword" placeholder="Enter password">
                        </div>
                        <button class="btn-primary" onclick="app.adminLogin()">Login</button>
                    </div>
                </div>

                <!-- Admin Panel -->
                <div id="adminPanel" class="hidden">
                    <div class="admin-header">
                        <div class="admin-title">
                            <i class="fas fa-crown"></i>
                            Admin Dashboard
                        </div>
                        <div>
                            <button class="new-movie-toggle" id="newMovieToggle" onclick="app.toggleNewMovieForm()">
                                <i class="fas fa-plus"></i> Add New Movie
                            </button>
                            <button class="btn-secondary" onclick="app.adminLogout()">Logout</button>
                        </div>
                    </div>

                    <!-- Admin Stats -->
                    <div class="admin-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="totalMovies">0</div>
                            <div class="stat-label">Total Movies</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalGenres">0</div>
                            <div class="stat-label">Genres</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="newestMovie">-</div>
                            <div class="stat-label">Newest Movie</div>
                        </div>
                    </div>

                    <!-- Movie Form -->
                    <div class="movie-form hidden" id="movieForm">
                        <h4 id="formTitle">Add New Movie</h4>
                        <form onsubmit="app.saveMovie(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Movie Title *</label>
                                    <input type="text" class="form-input" id="movieTitle" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Year *</label>
                                    <input type="number" class="form-input" id="movieYear" min="1900" max="2030" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Genre *</label>
                                    <select class="form-input" id="movieType" required>
                                        <option value="">Select Genre</option>
                                        <option value="Action">Action</option>
                                        <option value="Comedy">Comedy</option>
                                        <option value="Drama">Drama</option>
                                        <option value="Horror">Horror</option>
                                        <option value="Romance">Romance</option>
                                        <option value="Sci-Fi">Sci-Fi</option>
                                        <option value="Thriller">Thriller</option>
                                        <option value="Documentary">Documentary</option>
                                        <option value="Animation">Animation</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Poster URL *</label>
                                    <input type="url" class="form-input" id="moviePoster" required placeholder="https://...">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Movie Link (Direct Link) *</label>
                                <input type="url" class="form-input" id="movieLink" required placeholder="https://...">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Description *</label>
                                <textarea class="form-textarea" id="movieDescription" required placeholder="Enter movie description..."></textarea>
                            </div>
                            <div style="display: flex; gap: 1rem;">
                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-save"></i> Save Movie
                                </button>
                                <button type="button" class="btn-secondary" onclick="app.cancelEdit()">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Admin Movies List -->
                    <div class="movies-grid" id="adminMoviesGrid">
                        <!-- Admin movies will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="videoModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="app.closeVideoModal()">
                <i class="fas fa-times"></i>
            </button>
            <div class="video-container">
                <iframe id="moviePlayer" allowfullscreen></iframe>
            </div>
            <div class="modal-info">
                <div class="modal-title" id="modalTitle"></div>
                <div class="modal-meta">
                    <span id="modalYear"></span>
                    <span id="modalType"></span>
                </div>
                <div class="modal-description" id="modalDescription"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>About OussaStream</h4>
                    <p>Your premium destination for the greatest movies of all time. We curate the finest collection of cinema from around the world.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <p><a href="#" onclick="app.showHome()">Home</a></p>
                    <p><a href="#" onclick="app.showMovies()">Movies</a></p>
                    <p><a href="#" onclick="app.showCollections()">Collections</a></p>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <p><a href="#">Help Center</a></p>
                    <p><a href="#">Contact Us</a></p>
                    <p><a href="#">Terms of Service</a></p>
                </div>
                <div class="footer-section">
                    <h4>Connect</h4>
                    <p>Follow us on social media for the latest updates</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 OussaStream. All rights reserved. Made with <span style="color: var(--netflix-red);">❤</span> by OussaStream Team.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAMxFcc8nt3RgsodtGBUw-jYEZu6Ui4NIA",
            authDomain: "oussastream.firebaseapp.com",
            databaseURL: "https://oussastream-default-rtdb.firebaseio.com",
            projectId: "oussastream",
            storageBucket: "oussastream.firebasestorage.app",
            messagingSenderId: "12799093969",
            appId: "1:12799093969:web:fc044c5c7b3c78a1e3e9f0"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Simple encryption for credentials (Base64 encoding)
        const ENCRYPTED_CREDENTIALS = {
            username: btoa('admin'), // admin
            password: btoa('Oussama@123') // Oussama@123
        };

        class OussaStreamApp {
            constructor() {
                this.currentPage = 1;
                this.moviesPerPage = 12;
                this.currentFilter = 'all';
                this.currentSearch = '';
                this.isAdminLoggedIn = false;
                this.movies = [];
                this.editingMovieId = null;
                this.currentMovie = null;
                this.currentView = 'home';
                this.newMovieToggleActive = false;
                this.firebaseConnected = false;

                this.init();
            }

            init() {
                this.initFirebase();
                this.bindEvents();
                this.showLoadingOverlay();
                
                // Show loading for 2 seconds to allow Firebase connection
                setTimeout(() => {
                    this.hideLoadingOverlay();
                    this.showHome();
                    this.initAnimations();
                }, 2000);

                this.initNavbarScroll();
            }

            initFirebase() {
                const connectionStatus = document.getElementById('connectionStatus');
                
                // Check connection status
                const connectedRef = database.ref('.info/connected');
                connectedRef.on('value', (snapshot) => {
                    if (snapshot.val() === true) {
                        this.firebaseConnected = true;
                        connectionStatus.className = 'connection-status connected';
                        connectionStatus.innerHTML = '<i class="fas fa-wifi"></i> Connected';
                        console.log('Connected to Firebase');
                        this.loadMoviesFromFirebase();
                    } else {
                        this.firebaseConnected = false;
                        connectionStatus.className = 'connection-status disconnected';
                        connectionStatus.innerHTML = '<i class="fas fa-wifi"></i> Disconnected';
                        console.log('Disconnected from Firebase');
                    }
                });

                // Listen for movies changes in real-time
                database.ref('movies').on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        this.movies = Object.keys(data).map(key => ({
                            id: key,
                            ...data[key]
                        }));
                    } else {
                        this.movies = [];
                        this.initializeSampleMovies();
                    }
                    this.updateUI();
                });
            }

            loadMoviesFromFirebase() {
                database.ref('movies').once('value', (snapshot) => {
                    const data = snapshot.val();
                    if (!data) {
                        // Initialize with sample movies if database is empty
                        this.initializeSampleMovies();
                    }
                });
            }

            initializeSampleMovies() {
                const sampleMovies = [
                    {
                        title: "The Shawshank Redemption",
                        year: 1994,
                        type: "Drama",
                        description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                        poster: "https://images.unsplash.com/photo-1489599732936-0a7c3fd5e8d1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/6hB3S9bIaco"
                    },
                    {
                        title: "The Godfather",
                        year: 1972,
                        type: "Drama",
                        description: "The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son.",
                        poster: "https://images.unsplash.com/photo-1478720568477-152d9b164e26?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/sY1S34973zA"
                    },
                    {
                        title: "Pulp Fiction",
                        year: 1994,
                        type: "Thriller",
                        description: "The lives of two mob hitmen, a boxer, a gangster and his wife intertwine in four tales of violence and redemption.",
                        poster: "https://images.unsplash.com/photo-1518621845511-d2e8aaf1b6ad?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/s7EdQ4FqbhY"
                    },
                    {
                        title: "Inception",
                        year: 2010,
                        type: "Sci-Fi",
                        description: "A thief who steals corporate secrets through dream-sharing technology is given the inverse task of planting an idea.",
                        poster: "https://images.unsplash.com/photo-1566043292-78f944e445a8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/YoHD9XEInc0"
                    },
                    {
                        title: "The Matrix",
                        year: 1999,
                        type: "Action",
                        description: "A computer programmer discovers that reality as he knows it is a simulation and joins a rebellion to break free.",
                        poster: "https://images.unsplash.com/photo-1509347528160-9a9e33742cdb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/vKQi3bBA1y8"
                    },
                    {
                        title: "Forrest Gump",
                        year: 1994,
                        type: "Comedy",
                        description: "The story of a man with low IQ who accomplishes great things in life and is present during significant historic events.",
                        poster: "https://images.unsplash.com/photo-1587731556938-38755b4803a6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                        videoUrl: "https://www.youtube.com/embed/bLvqoHBptjg"
                    }
                ];

                // Add sample movies to Firebase
                const moviesRef = database.ref('movies');
                sampleMovies.forEach(movie => {
                    moviesRef.push(movie);
                });
            }

            saveMovieToFirebase(movieData) {
                if (!this.firebaseConnected) {
                    alert('Not connected to Firebase. Please check your internet connection.');
                    return;
                }

                if (this.editingMovieId) {
                    // Update existing movie
                    database.ref('movies/' + this.editingMovieId).update(movieData)
                        .then(() => {
                            console.log('Movie updated successfully');
                        })
                        .catch((error) => {
                            console.error('Error updating movie:', error);
                            alert('Error updating movie: ' + error.message);
                        });
                } else {
                    // Add new movie
                    database.ref('movies').push(movieData)
                        .then(() => {
                            console.log('Movie added successfully');
                        })
                        .catch((error) => {
                            console.error('Error adding movie:', error);
                            alert('Error adding movie: ' + error.message);
                        });
                }
            }

            deleteMovieFromFirebase(movieId) {
                if (!this.firebaseConnected) {
                    alert('Not connected to Firebase. Please check your internet connection.');
                    return;
                }

                if (confirm('Are you sure you want to delete this movie? This action cannot be undone.')) {
                    database.ref('movies/' + movieId).remove()
                        .then(() => {
                            console.log('Movie deleted successfully');
                        })
                        .catch((error) => {
                            console.error('Error deleting movie:', error);
                            alert('Error deleting movie: ' + error.message);
                        });
                }
            }

            updateUI() {
                this.renderMovies();
                this.renderAdminMovies();
                this.updateCollectionCounts();
                this.updateAdminStats();
            }

            bindEvents() {
                // Search input
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.currentSearch = e.target.value.toLowerCase();
                        this.currentPage = 1;
                        this.renderMovies();
                    });
                }

                // Close modal when clicking outside
                window.addEventListener('click', (e) => {
                    const modal = document.getElementById('videoModal');
                    if (e.target === modal) {
                        this.closeVideoModal();
                    }
                });

                // Escape key to close modal
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        this.closeVideoModal();
                    }
                });
            }

            initNavbarScroll() {
                const navbar = document.getElementById('mainNavbar');
                window.addEventListener('scroll', () => {
                    if (window.scrollY > 50) {
                        navbar.classList.add('scrolled');
                    } else {
                        navbar.classList.remove('scrolled');
                    }
                });
            }

            initAnimations() {
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animate-slide-up');
                        }
                    });
                }, observerOptions);

                document.querySelectorAll('.movie-card, .collection-card').forEach(el => {
                    observer.observe(el);
                });
            }

            showLoadingOverlay() {
                document.getElementById('loadingOverlay').classList.remove('hidden');
            }

            hideLoadingOverlay() {
                document.getElementById('loadingOverlay').classList.add('hidden');
            }

            showHome() {
                this.currentView = 'home';
                document.getElementById('mainContent').classList.remove('hidden');
                document.getElementById('moviesPage').classList.add('hidden');
                document.getElementById('adminSection').classList.add('hidden');
                this.renderNewMovies();
                this.updateCollectionCounts();
            }

            showMovies() {
                this.currentView = 'movies';
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('moviesPage').classList.remove('hidden');
                document.getElementById('adminSection').classList.add('hidden');
                this.renderMovies();
            }

            showCollections() {
                this.showHome();
                document.querySelector('#collectionsSection').scrollIntoView({ behavior: 'smooth' });
            }

            toggleAdmin() {
                this.currentView = 'admin';
                document.getElementById('mainContent').classList.add('hidden');
                document.getElementById('moviesPage').classList.add('hidden');
                document.getElementById('adminSection').classList.remove('hidden');
                
                if (this.isAdminLoggedIn) {
                    this.showAdminPanel();
                } else {
                    this.showAdminLogin();
                }
            }

            showAdminLogin() {
                document.getElementById('adminLogin').classList.remove('hidden');
                document.getElementById('adminPanel').classList.add('hidden');
            }

            showAdminPanel() {
                document.getElementById('adminLogin').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                this.renderAdminMovies();
                this.updateAdminStats();
            }

            adminLogin() {
                const username = document.getElementById('adminUsername').value;
                const password = document.getElementById('adminPassword').value;

                if (btoa(username) === ENCRYPTED_CREDENTIALS.username && 
                    btoa(password) === ENCRYPTED_CREDENTIALS.password) {
                    this.isAdminLoggedIn = true;
                    this.showAdminPanel();
                    document.getElementById('adminUsername').value = '';
                    document.getElementById('adminPassword').value = '';
                } else {
                    alert('Invalid credentials!');
                }
            }

            adminLogout() {
                this.isAdminLoggedIn = false;
                this.showAdminLogin();
            }

            toggleNewMovieForm() {
                const form = document.getElementById('movieForm');
                const toggle = document.getElementById('newMovieToggle');
                
                if (this.newMovieToggleActive) {
                    form.classList.add('hidden');
                    toggle.innerHTML = '<i class="fas fa-plus"></i> Add New Movie';
                    toggle.classList.remove('active');
                    this.newMovieToggleActive = false;
                    this.cancelEdit();
                } else {
                    form.classList.remove('hidden');
                    toggle.innerHTML = '<i class="fas fa-minus"></i> Cancel';
                    toggle.classList.add('active');
                    this.newMovieToggleActive = true;
                }
            }

            saveMovie(event) {
                event.preventDefault();
                
                const title = document.getElementById('movieTitle').value;
                const year = parseInt(document.getElementById('movieYear').value);
                const type = document.getElementById('movieType').value;
                const poster = document.getElementById('moviePoster').value;
                const videoUrl = document.getElementById('movieLink').value;
                const description = document.getElementById('movieDescription').value;

                const movieData = {
                    title,
                    year,
                    type,
                    poster,
                    videoUrl,
                    description
                };

                this.saveMovieToFirebase(movieData);
                this.resetForm();
                this.toggleNewMovieForm();
            }

            editMovie(id) {
                const movie = this.movies.find(m => m.id === id);
                if (movie) {
                    this.editingMovieId = id;
                    document.getElementById('movieTitle').value = movie.title;
                    document.getElementById('movieYear').value = movie.year;
                    document.getElementById('movieType').value = movie.type;
                    document.getElementById('moviePoster').value = movie.poster;
                    document.getElementById('movieLink').value = movie.videoUrl;
                    document.getElementById('movieDescription').value = movie.description;
                    document.getElementById('formTitle').textContent = 'Edit Movie';
                    
                    if (!this.newMovieToggleActive) {
                        this.toggleNewMovieForm();
                    }
                }
            }

            deleteMovie(id) {
                this.deleteMovieFromFirebase(id);
            }

            cancelEdit() {
                this.editingMovieId = null;
                this.resetForm();
                document.getElementById('formTitle').textContent = 'Add New Movie';
            }

            resetForm() {
                document.getElementById('movieTitle').value = '';
                document.getElementById('movieYear').value = '';
                document.getElementById('movieType').value = '';
                document.getElementById('moviePoster').value = '';
                document.getElementById('movieLink').value = '';
                document.getElementById('movieDescription').value = '';
            }

            filterMovies(filter) {
                this.currentFilter = filter;
                this.currentPage = 1;
                
                // Update active filter button
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                if (this.currentView === 'home') {
                    this.showMovies();
                } else {
                    this.renderMovies();
                }
            }

            getFilteredMovies() {
                let filtered = this.movies;

                // Apply search filter
                if (this.currentSearch) {
                    filtered = filtered.filter(movie =>
                        movie.title.toLowerCase().includes(this.currentSearch)
                    );
                }

                // Apply type filter
                if (this.currentFilter !== 'all') {
                    filtered = filtered.filter(movie => movie.type === this.currentFilter);
                }

                return filtered;
            }

            renderNewMovies() {
                const container = document.getElementById('newMoviesGrid');
                const newMovies = this.movies
                    .sort((a, b) => b.year - a.year)
                    .slice(0, 6);

                container.innerHTML = newMovies.map(movie => this.createMovieCard(movie, false)).join('');
            }

            renderMovies() {
                const container = document.getElementById('moviesGrid');
                const filtered = this.getFilteredMovies();
                
                // Pagination
                const startIndex = (this.currentPage - 1) * this.moviesPerPage;
                const endIndex = startIndex + this.moviesPerPage;
                const paginatedMovies = filtered.slice(startIndex, endIndex);

                container.innerHTML = paginatedMovies.map(movie => 
                    this.createMovieCard(movie, this.isAdminLoggedIn)
                ).join('');

                this.renderPagination(filtered.length);
            }

            renderAdminMovies() {
                if (!this.isAdminLoggedIn) return;
                
                const container = document.getElementById('adminMoviesGrid');
                container.innerHTML = this.movies.map(movie => 
                    this.createMovieCard(movie, true)
                ).join('');
            }

            createMovieCard(movie, showAdminControls) {
                return `
                    <div class="movie-card animate-scale-in">
                        <img src="${movie.poster}" alt="${movie.title}" class="movie-poster" loading="lazy">
                        <div class="movie-info">
                            <div class="movie-title">${movie.title}</div>
                            <div class="movie-meta">
                                <span>${movie.year}</span>
                                <span>${movie.type}</span>
                            </div>
                            <div class="movie-description">${movie.description}</div>
                            <div class="movie-actions">
                                <button class="btn-watch" onclick="app.watchMovie('${movie.id}')">
                                    <i class="fas fa-play"></i> Watch
                                </button>
                                ${showAdminControls ? `
                                    <button class="btn-edit" onclick="app.editMovie('${movie.id}')" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn-delete" onclick="app.deleteMovie('${movie.id}')" title="Delete">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }

            renderPagination(totalMovies) {
                const container = document.getElementById('paginationContainer');
                const totalPages = Math.ceil(totalMovies / this.moviesPerPage);

                if (totalPages <= 1) {
                    container.innerHTML = '';
                    return;
                }

                let paginationHTML = `
                    <button class="pagination-btn" ${this.currentPage === 1 ? 'disabled' : ''} 
                            onclick="app.goToPage(${this.currentPage - 1})">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                `;

                // Show page numbers
                for (let i = 1; i <= totalPages; i++) {
                    if (i === 1 || i === totalPages || (i >= this.currentPage - 2 && i <= this.currentPage + 2)) {
                        paginationHTML += `
                            <button class="pagination-btn ${i === this.currentPage ? 'active' : ''}" 
                                    onclick="app.goToPage(${i})">
                                ${i}
                            </button>
                        `;
                    } else if (i === this.currentPage - 3 || i === this.currentPage + 3) {
                        paginationHTML += '<span class="pagination-btn" style="border: none; cursor: default;">...</span>';
                    }
                }

                paginationHTML += `
                    <button class="pagination-btn" ${this.currentPage === totalPages ? 'disabled' : ''} 
                            onclick="app.goToPage(${this.currentPage + 1})">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                `;

                container.innerHTML = paginationHTML;
            }

            goToPage(page) {
                this.currentPage = page;
                this.renderMovies();
                window.scrollTo(0, 0);
            }

            updateCollectionCounts() {
                const counts = {
                    drama: this.movies.filter(m => m.type === 'Drama').length,
                    action: this.movies.filter(m => m.type === 'Action').length,
                    comedy: this.movies.filter(m => m.type === 'Comedy').length,
                    thriller: this.movies.filter(m => m.type === 'Thriller').length
                };

                document.getElementById('dramaCount').textContent = `${counts.drama} movies`;
                document.getElementById('actionCount').textContent = `${counts.action} movies`;
                document.getElementById('comedyCount').textContent = `${counts.comedy} movies`;
                document.getElementById('thrillerCount').textContent = `${counts.thriller} movies`;
            }

            updateAdminStats() {
                if (!this.isAdminLoggedIn) return;

                const genres = [...new Set(this.movies.map(m => m.type))].length;
                const newest = this.movies.length > 0 ? 
                    this.movies.sort((a, b) => b.year - a.year)[0].title : '-';

                document.getElementById('totalMovies').textContent = this.movies.length;
                document.getElementById('totalGenres').textContent = genres;
                document.getElementById('newestMovie').textContent = newest;
            }

            watchMovie(id) {
                const movie = this.movies.find(m => m.id === id);
                if (movie) {
                    this.currentMovie = movie;
                    document.getElementById('moviePlayer').src = movie.videoUrl;
                    document.getElementById('modalTitle').textContent = movie.title;
                    document.getElementById('modalYear').textContent = movie.year;
                    document.getElementById('modalType').textContent = movie.type;
                    document.getElementById('modalDescription').textContent = movie.description;
                    document.getElementById('videoModal').classList.add('show');
                    document.body.style.overflow = 'hidden';
                }
            }

            closeVideoModal() {
                document.getElementById('videoModal').classList.remove('show');
                document.getElementById('moviePlayer').src = '';
                document.body.style.overflow = '';
                this.currentMovie = null;
            }
        }

        // Initialize the app
        const app = new OussaStreamApp();

        // Hide connection status after 5 seconds if connected
        setTimeout(() => {
            const status = document.getElementById('connectionStatus');
            if (status.classList.contains('connected')) {
                status.style.opacity = '0';
                setTimeout(() => status.style.display = 'none', 300);
            }
        }, 5000);
    </script>
</body>
</html>
